<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Management • cancR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Management">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cancR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Get started</h6></li>
    <li><a class="dropdown-item" href="../articles/install.html">Install and Update R</a></li>
    <li><a class="dropdown-item" href="../articles/cancR.html">Install and Update cancR</a></li>
    <li><a class="dropdown-item" href="../articles/setup.html">R setup</a></li>
    <li><a class="dropdown-item" href="../articles/redcap.html">Redcap and R</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>R guides</h6></li>
    <li><a class="dropdown-item" href="../articles/basic.html">Basic R</a></li>
    <li><a class="dropdown-item" href="../articles/import.html">Importing data</a></li>
    <li><a class="dropdown-item" href="../articles/data_management.html">Data Management</a></li>
    <li><a class="dropdown-item" href="../articles/tables.html">Tables</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>cancR examples</h6></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Data Management</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/matorholt/cancR/vignettes/articles/data_management.Rmd" class="external-link"><code>vignettes/articles/data_management.Rmd</code></a></small>
      <div class="d-none name"><code>data_management.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This article is a thorough guide to data management in our. It mainly
uses the dplyr package with additional cancR functions. The article is
structured as chapters, where each chapter describes a specific task and
should work as a library.</p>
<div class="section level3">
<h3 id="loading-the-cancr-package">Loading the cancR package<a class="anchor" aria-label="anchor" href="#loading-the-cancr-package"></a>
</h3>
<p>First we load the cancR package. The package automatically loads many
packages useful for data management</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://matorholt.github.io/cancR/" class="external-link">cancR</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>The cancR package comes with ready-to-use datasets. In this article
we use the redcap_df dataset which imitates a dataset exported directly
from redcap.</p>
</div>
<div class="section level3">
<h3 id="combining-functions-with-the-piping-operator">Combining functions with the piping operator<a class="anchor" aria-label="anchor" href="#combining-functions-with-the-piping-operator"></a>
</h3>
<p>It is advised to combine the functions described in this article into
one code chunk that runs all functions at once. The functions are
combined with the symbol <code>%&gt;%</code> called a pipe. The shortcut
for a pipe is ctrl+shift+m.</p>
<p>Piping starts by specifying the dataset of which the analyses should
be performed. After this all subsequent functions are separated by a
pipe. In the following example we start in the dataset “redcap_df”,
where we subsequently select the variables id, sex and birth, add a new
variable called “new_variable” and lastly filter so that we subset the
dataset to rows where type = 1. All these functions are combined into a
piping structure and assigned to a new object named “new_data”</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">sex</span>, <span class="va">birth</span>, <span class="va">type</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>new_variable <span class="op">=</span> <span class="st">"new"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-inspection">Data inspection<a class="anchor" aria-label="anchor" href="#data-inspection"></a>
</h2>
<p>Before starting on data management, it is important to get an
overview of the dataset.</p>
<p>The entire dataset can be expected by either clicking on the dataset
in the environment below or with the command <code><a href="https://rdrr.io/r/utils/View.html" class="external-link">View()</a></code></p>
<p>For a simpler inspection, <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> shows only the first
six rows in the console</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">redcap_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup date_of_surgery      size type localisation</span></span>
<span><span class="co">#&gt; 1  1   1 79.1 20-09-1929 03-04-2023      2008-11-03  7.302734    1            3</span></span>
<span><span class="co">#&gt; 2  2   2 38.1 12-10-1953 18-12-2025      1991-11-13 20.043036    1            1</span></span>
<span><span class="co">#&gt; 3  3   1 60.6 11-05-1948 21-09-2025      2008-12-17 42.412003    1            2</span></span>
<span><span class="co">#&gt; 4  4   1 45.2 22-04-1949 11-02-2022      1994-07-17 27.853775    1            3</span></span>
<span><span class="co">#&gt; 5  5   2 39.5 18-01-1966 21-04-2022      2005-07-16 25.587530    2            1</span></span>
<span><span class="co">#&gt; 6  6   1 81.2 06-11-1925 17-07-2023      2007-02-02 49.415904    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10 ck death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1       NA       0    1     1  1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2       NA       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3        0       1   NA    NA  0 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4        1       0    0     0  0 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5       NA       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6        1       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span></code></pre></div>
<p>All column names can be shown with <code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">redcap_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "id"              "sex"             "age"             "birth"          </span></span>
<span><span class="co">#&gt;  [5] "followup"        "date_of_surgery" "size"            "type"           </span></span>
<span><span class="co">#&gt;  [9] "localisation"    "necrosis"        "margins"         "cd10"           </span></span>
<span><span class="co">#&gt; [13] "sox10"           "ck"              "death_date"      "recurrence_date"</span></span>
<span><span class="co">#&gt; [17] "metastasis_date"</span></span></code></pre></div>
<p>It is also important to assess the structure of the data to check for
correct formatting. E.g. are date-variables coded as dates, continouous
variables as numeric etc.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">redcap_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    500 obs. of  17 variables:</span></span>
<span><span class="co">#&gt;  $ id             : int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ sex            : num  1 2 1 1 2 1 1 1 2 2 ...</span></span>
<span><span class="co">#&gt;  $ age            : num  79.1 38.1 60.6 45.2 39.5 81.2 74.9 38.8 31.8 51.3 ...</span></span>
<span><span class="co">#&gt;  $ birth          : chr  "20-09-1929" "12-10-1953" "11-05-1948" "22-04-1949" ...</span></span>
<span><span class="co">#&gt;  $ followup       : chr  "03-04-2023" "18-12-2025" "21-09-2025" "11-02-2022" ...</span></span>
<span><span class="co">#&gt;  $ date_of_surgery: chr  "2008-11-03" "1991-11-13" "2008-12-17" "1994-07-17" ...</span></span>
<span><span class="co">#&gt;  $ size           : num  7.3 20 42.4 27.9 25.6 ...</span></span>
<span><span class="co">#&gt;  $ type           : int  1 1 1 1 2 2 0 0 0 2 ...</span></span>
<span><span class="co">#&gt;  $ localisation   : int  3 1 2 3 1 3 2 5 3 1 ...</span></span>
<span><span class="co">#&gt;  $ necrosis       : num  NA NA 0 1 NA 1 0 1 NA NA ...</span></span>
<span><span class="co">#&gt;  $ margins        : chr  "0" "0" "1" "0" ...</span></span>
<span><span class="co">#&gt;  $ cd10           : num  1 0 NA 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ sox10          : num  1 0 NA 0 NA 1 1 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ ck             : num  1 NA 0 0 0 0 0 NA 0 1 ...</span></span>
<span><span class="co">#&gt;  $ death_date     : chr  NA NA "2017-09-02" "2018-10-04" ...</span></span>
<span><span class="co">#&gt;  $ recurrence_date: chr  "2015-03-22" NA NA "2011-12-31" ...</span></span>
<span><span class="co">#&gt;  $ metastasis_date: chr  NA NA NA NA ...</span></span></code></pre></div>
<p>Here we see that all date variables are coded as characters and not
date. The conversion to date are described in the chapter: “Date
formatting”</p>
<p>To get a graphical glimpse of the data we can use the summarisR()
function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/summarisR.html">summarisR</a></span><span class="op">(</span><span class="va">redcap_df</span>, </span>
<span>          vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sex</span>, <span class="va">size</span>, <span class="va">type</span>, <span class="va">localisation</span>, <span class="va">necrosis</span>, <span class="va">cd10</span>, <span class="va">sox10</span>, <span class="va">ck</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="data_management_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" alt="" width="700"></p>
<p>And to exploit the number of missing values we use the missR()
function</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/missR.html">missR</a></span><span class="op">(</span><span class="va">redcap_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; Nas detected in the following variables:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;          variable NAs</span></span>
<span><span class="co">#&gt; 1 metastasis_date 339</span></span>
<span><span class="co">#&gt; 2      death_date 314</span></span>
<span><span class="co">#&gt; 3 recurrence_date 254</span></span>
<span><span class="co">#&gt; 4        necrosis 172</span></span>
<span><span class="co">#&gt; 5            cd10 162</span></span>
<span><span class="co">#&gt; 6           sox10 162</span></span>
<span><span class="co">#&gt; 7              ck 157</span></span></code></pre></div>
<p>We can also check if numerical variables are normally distributed
with the distributR() function</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/distributR.html">distributR</a></span><span class="op">(</span><span class="va">redcap_df</span>,</span>
<span>           vars <span class="op">=</span> <span class="va">size</span><span class="op">)</span></span></code></pre></div>
<p><img src="data_management_files/figure-html/unnamed-chunk-9-1.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level2">
<h2 id="data-management">Data management<a class="anchor" aria-label="anchor" href="#data-management"></a>
</h2>
<p>The next section goes through the most basic data management
functions from the dplyr package.</p>
<div class="section level3">
<h3 id="selection-of-variables">Selection of variables<a class="anchor" aria-label="anchor" href="#selection-of-variables"></a>
</h3>
<p>Variables/columns can be selected and removed with the select()
function.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">sex</span>, <span class="va">birth</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex      birth</span></span>
<span><span class="co">#&gt; 1  1   1 20-09-1929</span></span>
<span><span class="co">#&gt; 2  2   2 12-10-1953</span></span>
<span><span class="co">#&gt; 3  3   1 11-05-1948</span></span>
<span><span class="co">#&gt; 4  4   1 22-04-1949</span></span>
<span><span class="co">#&gt; 5  5   2 18-01-1966</span></span>
<span><span class="co">#&gt; 6  6   1 06-11-1925</span></span></code></pre></div>
<p>Variables are removed with a minus sign.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span>, <span class="op">-</span><span class="va">birth</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   sex  age   followup date_of_surgery      size type localisation necrosis</span></span>
<span><span class="co">#&gt; 1   1 79.1 03-04-2023      2008-11-03  7.302734    1            3       NA</span></span>
<span><span class="co">#&gt; 2   2 38.1 18-12-2025      1991-11-13 20.043036    1            1       NA</span></span>
<span><span class="co">#&gt; 3   1 60.6 21-09-2025      2008-12-17 42.412003    1            2        0</span></span>
<span><span class="co">#&gt; 4   1 45.2 11-02-2022      1994-07-17 27.853775    1            3        1</span></span>
<span><span class="co">#&gt; 5   2 39.5 21-04-2022      2005-07-16 25.587530    2            1       NA</span></span>
<span><span class="co">#&gt; 6   1 81.2 17-07-2023      2007-02-02 49.415904    2            3        1</span></span>
<span><span class="co">#&gt;   margins cd10 sox10 ck death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1       0    1     1  1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3       1   NA    NA  0 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4       0    0     0  0 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span></code></pre></div>
<p>It is also possible to choose variable based on text patterns, which
is useful for variables with a common prefix/suffix such as _date</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"_date"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span></code></pre></div>
<p>The text pattern can also be starts_with, ends_with and matches for
an exact match.</p>
<p>If we need to select a large range of variables we call the first and
last separated by a colon:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">sex</span><span class="op">:</span><span class="va">sox10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   sex  age      birth   followup date_of_surgery      size type localisation</span></span>
<span><span class="co">#&gt; 1   1 79.1 20-09-1929 03-04-2023      2008-11-03  7.302734    1            3</span></span>
<span><span class="co">#&gt; 2   2 38.1 12-10-1953 18-12-2025      1991-11-13 20.043036    1            1</span></span>
<span><span class="co">#&gt; 3   1 60.6 11-05-1948 21-09-2025      2008-12-17 42.412003    1            2</span></span>
<span><span class="co">#&gt; 4   1 45.2 22-04-1949 11-02-2022      1994-07-17 27.853775    1            3</span></span>
<span><span class="co">#&gt; 5   2 39.5 18-01-1966 21-04-2022      2005-07-16 25.587530    2            1</span></span>
<span><span class="co">#&gt; 6   1 81.2 06-11-1925 17-07-2023      2007-02-02 49.415904    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10</span></span>
<span><span class="co">#&gt; 1       NA       0    1     1</span></span>
<span><span class="co">#&gt; 2       NA       0    0     0</span></span>
<span><span class="co">#&gt; 3        0       1   NA    NA</span></span>
<span><span class="co">#&gt; 4        1       0    0     0</span></span>
<span><span class="co">#&gt; 5       NA       0    0    NA</span></span>
<span><span class="co">#&gt; 6        1       1    1     1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="renaming-variables">Renaming variables<a class="anchor" aria-label="anchor" href="#renaming-variables"></a>
</h3>
<p>Renaming of variable names can be done using rename(). The syntax is
“new name” = “old name”</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/rename.html" class="external-link">rename</a></span><span class="op">(</span>index <span class="op">=</span> <span class="va">date_of_surgery</span>,</span>
<span>         cytokeratin <span class="op">=</span> <span class="va">ck</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup      index      size type localisation</span></span>
<span><span class="co">#&gt; 1  1   1 79.1 20-09-1929 03-04-2023 2008-11-03  7.302734    1            3</span></span>
<span><span class="co">#&gt; 2  2   2 38.1 12-10-1953 18-12-2025 1991-11-13 20.043036    1            1</span></span>
<span><span class="co">#&gt; 3  3   1 60.6 11-05-1948 21-09-2025 2008-12-17 42.412003    1            2</span></span>
<span><span class="co">#&gt; 4  4   1 45.2 22-04-1949 11-02-2022 1994-07-17 27.853775    1            3</span></span>
<span><span class="co">#&gt; 5  5   2 39.5 18-01-1966 21-04-2022 2005-07-16 25.587530    2            1</span></span>
<span><span class="co">#&gt; 6  6   1 81.2 06-11-1925 17-07-2023 2007-02-02 49.415904    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10 cytokeratin death_date recurrence_date</span></span>
<span><span class="co">#&gt; 1       NA       0    1     1           1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2       NA       0    0     0          NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3        0       1   NA    NA           0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4        1       0    0     0           0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 5       NA       0    0    NA           0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6        1       1    1     1           0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   metastasis_date</span></span>
<span><span class="co">#&gt; 1            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6            &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="createmodify-variables">Create/modify variables<a class="anchor" aria-label="anchor" href="#createmodify-variables"></a>
</h3>
<p>Variables can be created or modified with the mutate() function with
the syntax: mutate(variable = condition). If the variable already exists
in the dataset, it is modified automatically.</p>
<p>We now recode necrosis, so that 1 = yes and everything else is
“no”.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>necrosis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">necrosis</span> <span class="op">==</span> <span class="fl">1</span>, <span class="st">"yes"</span>, <span class="st">"no"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup date_of_surgery      size type localisation</span></span>
<span><span class="co">#&gt; 1  1   1 79.1 20-09-1929 03-04-2023      2008-11-03  7.302734    1            3</span></span>
<span><span class="co">#&gt; 2  2   2 38.1 12-10-1953 18-12-2025      1991-11-13 20.043036    1            1</span></span>
<span><span class="co">#&gt; 3  3   1 60.6 11-05-1948 21-09-2025      2008-12-17 42.412003    1            2</span></span>
<span><span class="co">#&gt; 4  4   1 45.2 22-04-1949 11-02-2022      1994-07-17 27.853775    1            3</span></span>
<span><span class="co">#&gt; 5  5   2 39.5 18-01-1966 21-04-2022      2005-07-16 25.587530    2            1</span></span>
<span><span class="co">#&gt; 6  6   1 81.2 06-11-1925 17-07-2023      2007-02-02 49.415904    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10 ck death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1     &lt;NA&gt;       0    1     1  1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2     &lt;NA&gt;       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3       no       1   NA    NA  0 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4      yes       0    0     0  0 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5     &lt;NA&gt;       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6      yes       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span></code></pre></div>
<p>Notice that missing values in necrosis remain missing. If we want to
also assign these as “no” we change the <code>==</code> in the mutate
function to <code>%in%</code>. This will also imply that missing values
are converted to the “else” statement, here “no”.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>necrosis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">necrosis</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">1</span>, <span class="st">"yes"</span>, <span class="st">"no"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup date_of_surgery      size type localisation</span></span>
<span><span class="co">#&gt; 1  1   1 79.1 20-09-1929 03-04-2023      2008-11-03  7.302734    1            3</span></span>
<span><span class="co">#&gt; 2  2   2 38.1 12-10-1953 18-12-2025      1991-11-13 20.043036    1            1</span></span>
<span><span class="co">#&gt; 3  3   1 60.6 11-05-1948 21-09-2025      2008-12-17 42.412003    1            2</span></span>
<span><span class="co">#&gt; 4  4   1 45.2 22-04-1949 11-02-2022      1994-07-17 27.853775    1            3</span></span>
<span><span class="co">#&gt; 5  5   2 39.5 18-01-1966 21-04-2022      2005-07-16 25.587530    2            1</span></span>
<span><span class="co">#&gt; 6  6   1 81.2 06-11-1925 17-07-2023      2007-02-02 49.415904    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10 ck death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1       no       0    1     1  1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2       no       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3       no       1   NA    NA  0 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4      yes       0    0     0  0 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5       no       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6      yes       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span></code></pre></div>
<p>If we want more explicit control with the recoding or we have more
than one condition, we use case_when</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>necrosis <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case-and-replace-when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">necrosis</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"yes"</span>,</span>
<span>                              <span class="va">necrosis</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"no"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup date_of_surgery      size type localisation</span></span>
<span><span class="co">#&gt; 1  1   1 79.1 20-09-1929 03-04-2023      2008-11-03  7.302734    1            3</span></span>
<span><span class="co">#&gt; 2  2   2 38.1 12-10-1953 18-12-2025      1991-11-13 20.043036    1            1</span></span>
<span><span class="co">#&gt; 3  3   1 60.6 11-05-1948 21-09-2025      2008-12-17 42.412003    1            2</span></span>
<span><span class="co">#&gt; 4  4   1 45.2 22-04-1949 11-02-2022      1994-07-17 27.853775    1            3</span></span>
<span><span class="co">#&gt; 5  5   2 39.5 18-01-1966 21-04-2022      2005-07-16 25.587530    2            1</span></span>
<span><span class="co">#&gt; 6  6   1 81.2 06-11-1925 17-07-2023      2007-02-02 49.415904    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10 ck death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1     &lt;NA&gt;       0    1     1  1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2     &lt;NA&gt;       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3       no       1   NA    NA  0 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4      yes       0    0     0  0 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5     &lt;NA&gt;       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6      yes       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span></code></pre></div>
<p>Now we have preserved the missing values. We can also control what to
do with values that does not satisfy any of the criteria</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>necrosis <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case-and-replace-when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">necrosis</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"yes"</span>,</span>
<span>                              <span class="va">necrosis</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"no"</span>,</span>
<span>                              <span class="cn">T</span> <span class="op">~</span> <span class="st">"missing"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup date_of_surgery      size type localisation</span></span>
<span><span class="co">#&gt; 1  1   1 79.1 20-09-1929 03-04-2023      2008-11-03  7.302734    1            3</span></span>
<span><span class="co">#&gt; 2  2   2 38.1 12-10-1953 18-12-2025      1991-11-13 20.043036    1            1</span></span>
<span><span class="co">#&gt; 3  3   1 60.6 11-05-1948 21-09-2025      2008-12-17 42.412003    1            2</span></span>
<span><span class="co">#&gt; 4  4   1 45.2 22-04-1949 11-02-2022      1994-07-17 27.853775    1            3</span></span>
<span><span class="co">#&gt; 5  5   2 39.5 18-01-1966 21-04-2022      2005-07-16 25.587530    2            1</span></span>
<span><span class="co">#&gt; 6  6   1 81.2 06-11-1925 17-07-2023      2007-02-02 49.415904    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10 ck death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1  missing       0    1     1  1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  missing       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3       no       1   NA    NA  0 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4      yes       0    0     0  0 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5  missing       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6      yes       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span></code></pre></div>
<div class="section level4">
<h4 id="collecting-multiple-mutate-functions">Collecting multiple mutate functions<a class="anchor" aria-label="anchor" href="#collecting-multiple-mutate-functions"></a>
</h4>
<p>Multiple mutate functions can be collected in one call</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>new_variable <span class="op">=</span> <span class="st">"new"</span>,</span>
<span>         sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fl">1</span>, <span class="st">"f"</span>, <span class="st">"m"</span><span class="op">)</span>,</span>
<span>         size <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case-and-replace-when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">size</span> <span class="op">&gt;</span> <span class="fl">40</span> <span class="op">~</span> <span class="st">"large"</span>,</span>
<span>                          <span class="va">size</span> <span class="op">&lt;</span> <span class="fl">10</span> <span class="op">~</span> <span class="st">"small"</span>,</span>
<span>                          <span class="cn">T</span> <span class="op">~</span> <span class="st">"intermediate"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup date_of_surgery         size type</span></span>
<span><span class="co">#&gt; 1  1   f 79.1 20-09-1929 03-04-2023      2008-11-03        small    1</span></span>
<span><span class="co">#&gt; 2  2   m 38.1 12-10-1953 18-12-2025      1991-11-13 intermediate    1</span></span>
<span><span class="co">#&gt; 3  3   f 60.6 11-05-1948 21-09-2025      2008-12-17        large    1</span></span>
<span><span class="co">#&gt; 4  4   f 45.2 22-04-1949 11-02-2022      1994-07-17 intermediate    1</span></span>
<span><span class="co">#&gt; 5  5   m 39.5 18-01-1966 21-04-2022      2005-07-16 intermediate    2</span></span>
<span><span class="co">#&gt; 6  6   f 81.2 06-11-1925 17-07-2023      2007-02-02        large    2</span></span>
<span><span class="co">#&gt;   localisation necrosis margins cd10 sox10 ck death_date recurrence_date</span></span>
<span><span class="co">#&gt; 1            3       NA       0    1     1  1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2            1       NA       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3            2        0       1   NA    NA  0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4            3        1       0    0     0  0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 5            1       NA       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6            3        1       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   metastasis_date new_variable</span></span>
<span><span class="co">#&gt; 1            &lt;NA&gt;          new</span></span>
<span><span class="co">#&gt; 2            &lt;NA&gt;          new</span></span>
<span><span class="co">#&gt; 3            &lt;NA&gt;          new</span></span>
<span><span class="co">#&gt; 4            &lt;NA&gt;          new</span></span>
<span><span class="co">#&gt; 5            &lt;NA&gt;          new</span></span>
<span><span class="co">#&gt; 6            &lt;NA&gt;          new</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="mutating-multiple-variables-simultaneously">Mutating multiple variables simultaneously<a class="anchor" aria-label="anchor" href="#mutating-multiple-variables-simultaneously"></a>
</h4>
<p>Multiple variables can be modified with <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code> within
mutate. The syntax is:<br></p>
<p>`mutate(across(c(variable1, variable2), ~ function))</p>
<p>Here we convert the variables cd10, sox10 and ck to characters</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">cd10</span>, <span class="va">sox10</span>, <span class="va">ck</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cd10</span>, <span class="va">sox10</span>, <span class="va">ck</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   cd10 sox10   ck</span></span>
<span><span class="co">#&gt; 1    1     1    1</span></span>
<span><span class="co">#&gt; 2    0     0 &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3 &lt;NA&gt;  &lt;NA&gt;    0</span></span>
<span><span class="co">#&gt; 4    0     0    0</span></span>
<span><span class="co">#&gt; 5    0  &lt;NA&gt;    0</span></span>
<span><span class="co">#&gt; 6    1     1    0</span></span></code></pre></div>
<p>The <code>.</code> inside the <code>as.character(.)</code> refers to
all the variables inside <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across()</a></code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="recoding-of-variables">Recoding of variables<a class="anchor" aria-label="anchor" href="#recoding-of-variables"></a>
</h3>
<p>Recoding of variables can be done with the recodR() function in the
cancR package. The syntax here is a list of lists, so that list(variable
= list(new name = old name))</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/recodR.html">recodR</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"sex"</span> <span class="op">=</span> </span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"female"</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                           <span class="st">"male"</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>              <span class="st">"type"</span> <span class="op">=</span> </span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"benign"</span> <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                            <span class="st">"in_situ"</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                            <span class="st">"malignant"</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>              <span class="st">"localisation"</span> <span class="op">=</span> </span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"head"</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                     <span class="st">"neck"</span> <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                     <span class="st">"trunk"</span> <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                     <span class="st">"upper_extremity"</span> <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                     <span class="st">"lower_extremity"</span> <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id    sex  age      birth   followup date_of_surgery      size      type</span></span>
<span><span class="co">#&gt; 1  1 female 79.1 20-09-1929 03-04-2023      2008-11-03  7.302734   in_situ</span></span>
<span><span class="co">#&gt; 2  2   male 38.1 12-10-1953 18-12-2025      1991-11-13 20.043036   in_situ</span></span>
<span><span class="co">#&gt; 3  3 female 60.6 11-05-1948 21-09-2025      2008-12-17 42.412003   in_situ</span></span>
<span><span class="co">#&gt; 4  4 female 45.2 22-04-1949 11-02-2022      1994-07-17 27.853775   in_situ</span></span>
<span><span class="co">#&gt; 5  5   male 39.5 18-01-1966 21-04-2022      2005-07-16 25.587530 malignant</span></span>
<span><span class="co">#&gt; 6  6 female 81.2 06-11-1925 17-07-2023      2007-02-02 49.415904 malignant</span></span>
<span><span class="co">#&gt;   localisation necrosis margins cd10 sox10 ck death_date recurrence_date</span></span>
<span><span class="co">#&gt; 1        trunk       NA       0    1     1  1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2         head       NA       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3         neck        0       1   NA    NA  0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4        trunk        1       0    0     0  0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 5         head       NA       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6        trunk        1       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   metastasis_date</span></span>
<span><span class="co">#&gt; 1            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6            &lt;NA&gt;</span></span></code></pre></div>
<p>If the recoding should be more advanced and should be based on one or
more conditions, we can use ifelse() or case_when() (see examples under
“Create/modify variables”).</p>
</div>
<div class="section level3">
<h3 id="date-formatting">Date formatting<a class="anchor" aria-label="anchor" href="#date-formatting"></a>
</h3>
<p>Dates are often formatted as character strings and need to be
converted to correct date format. This can easily be done with the
datR() function:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/datR.html">datR</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"date"</span><span class="op">)</span>, <span class="va">birth</span>, <span class="va">followup</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;Date&gt;     &lt;Date&gt;          &lt;Date&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     1     1  79.1 1929-09-20 2023-04-03      2008-11-03  7.302734     1</span></span>
<span><span class="co">#&gt; 2:     2     2  38.1 1953-10-12 2025-12-18      1991-11-13 20.043036     1</span></span>
<span><span class="co">#&gt; 3:     3     1  60.6 1948-05-11 2025-09-21      2008-12-17 42.412003     1</span></span>
<span><span class="co">#&gt; 4:     4     1  45.2 1949-04-22 2022-02-11      1994-07-17 27.853775     1</span></span>
<span><span class="co">#&gt; 5:     5     2  39.5 1966-01-18 2022-04-21      2005-07-16 25.587530     2</span></span>
<span><span class="co">#&gt; 6:     6     1  81.2 1925-11-06 2023-07-17      2007-02-02 49.415904     2</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;Date&gt;          &lt;Date&gt;</span></span>
<span><span class="co">#&gt; 1:            3       NA       0     1     1     1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2:            1       NA       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            2        0       1    NA    NA     0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            3        1       0     0     0     0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 5:            1       NA       0     0    NA     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            3        1       1     1     1     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;Date&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="categorization-of-continuous-variables">Categorization of continuous variables<a class="anchor" aria-label="anchor" href="#categorization-of-continuous-variables"></a>
</h3>
<p>The optimal method for splitting continuous variables depends on the
number of splits: - One splits: ifelse() - More than one split:
case_when() - Splits based on a sequence or quantiles: cutR()</p>
<p>One split with ifelse()</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>size_bin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">size</span> <span class="op">&gt;</span> <span class="fl">20</span>, <span class="st">"large"</span>, <span class="st">"small"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     1     1  79.1 20-09-1929 03-04-2023      2008-11-03  7.302734     1</span></span>
<span><span class="co">#&gt; 2:     2     2  38.1 12-10-1953 18-12-2025      1991-11-13 20.043036     1</span></span>
<span><span class="co">#&gt; 3:     3     1  60.6 11-05-1948 21-09-2025      2008-12-17 42.412003     1</span></span>
<span><span class="co">#&gt; 4:     4     1  45.2 22-04-1949 11-02-2022      1994-07-17 27.853775     1</span></span>
<span><span class="co">#&gt; 5:     5     2  39.5 18-01-1966 21-04-2022      2005-07-16 25.587530     2</span></span>
<span><span class="co">#&gt; 6:     6     1  81.2 06-11-1925 17-07-2023      2007-02-02 49.415904     2</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            3       NA       0     1     1     1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2:            1       NA       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            2        0       1    NA    NA     0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            3        1       0     0     0     0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 5:            1       NA       0     0    NA     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            3        1       1     1     1     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    metastasis_date size_bin</span></span>
<span><span class="co">#&gt;             &lt;char&gt;   &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;    small</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;    large</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;    large</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;    large</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;    large</span></span>
<span><span class="co">#&gt; 6:            &lt;NA&gt;    large</span></span></code></pre></div>
<p>More splits with case_when()</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>size_bin <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case-and-replace-when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">size</span> <span class="op">&gt;</span> <span class="fl">40</span> <span class="op">~</span> <span class="st">"large"</span>,</span>
<span>                          <span class="va">size</span> <span class="op">&lt;</span> <span class="fl">10</span> <span class="op">~</span> <span class="st">"small"</span>,</span>
<span>                          <span class="cn">T</span> <span class="op">~</span> <span class="st">"intermediate"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     1     1  79.1 20-09-1929 03-04-2023      2008-11-03  7.302734     1</span></span>
<span><span class="co">#&gt; 2:     2     2  38.1 12-10-1953 18-12-2025      1991-11-13 20.043036     1</span></span>
<span><span class="co">#&gt; 3:     3     1  60.6 11-05-1948 21-09-2025      2008-12-17 42.412003     1</span></span>
<span><span class="co">#&gt; 4:     4     1  45.2 22-04-1949 11-02-2022      1994-07-17 27.853775     1</span></span>
<span><span class="co">#&gt; 5:     5     2  39.5 18-01-1966 21-04-2022      2005-07-16 25.587530     2</span></span>
<span><span class="co">#&gt; 6:     6     1  81.2 06-11-1925 17-07-2023      2007-02-02 49.415904     2</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            3       NA       0     1     1     1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2:            1       NA       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            2        0       1    NA    NA     0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            3        1       0     0     0     0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 5:            1       NA       0     0    NA     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            3        1       1     1     1     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    metastasis_date     size_bin</span></span>
<span><span class="co">#&gt;             &lt;char&gt;       &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;        small</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt; intermediate</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;        large</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt; intermediate</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt; intermediate</span></span>
<span><span class="co">#&gt; 6:            &lt;NA&gt;        large</span></span></code></pre></div>
<p>Splits based on a sequence can be done with the cutR() function:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/cutR.html">cutR</a></span><span class="op">(</span><span class="va">size</span>,</span>
<span>       <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">50</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup date_of_surgery  size type localisation</span></span>
<span><span class="co">#&gt; 1  1   1 79.1 20-09-1929 03-04-2023      2008-11-03  0-10    1            3</span></span>
<span><span class="co">#&gt; 2  2   2 38.1 12-10-1953 18-12-2025      1991-11-13 20-30    1            1</span></span>
<span><span class="co">#&gt; 3  3   1 60.6 11-05-1948 21-09-2025      2008-12-17 40-50    1            2</span></span>
<span><span class="co">#&gt; 4  4   1 45.2 22-04-1949 11-02-2022      1994-07-17 20-30    1            3</span></span>
<span><span class="co">#&gt; 5  5   2 39.5 18-01-1966 21-04-2022      2005-07-16 20-30    2            1</span></span>
<span><span class="co">#&gt; 6  6   1 81.2 06-11-1925 17-07-2023      2007-02-02 40-50    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10 ck death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1       NA       0    1     1  1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2       NA       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3        0       1   NA    NA  0 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4        1       0    0     0  0 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5       NA       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6        1       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span></code></pre></div>
<p>Multiple splits can also be performed with cutR() with name
assigning</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/cutR.html">cutR</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">size</span><span class="op">)</span>,</span>
<span>       seqlist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"age"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span>,<span class="fl">10</span><span class="op">)</span>,</span>
<span>                      <span class="st">"size"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"quantile"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>       name.list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"age"</span> <span class="op">=</span> <span class="st">"age_group"</span>,</span>
<span>                        <span class="st">"size"</span> <span class="op">=</span> <span class="st">"size_bin"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup date_of_surgery      size type localisation</span></span>
<span><span class="co">#&gt; 1  1   1 79.1 20-09-1929 03-04-2023      2008-11-03  7.302734    1            3</span></span>
<span><span class="co">#&gt; 2  2   2 38.1 12-10-1953 18-12-2025      1991-11-13 20.043036    1            1</span></span>
<span><span class="co">#&gt; 3  3   1 60.6 11-05-1948 21-09-2025      2008-12-17 42.412003    1            2</span></span>
<span><span class="co">#&gt; 4  4   1 45.2 22-04-1949 11-02-2022      1994-07-17 27.853775    1            3</span></span>
<span><span class="co">#&gt; 5  5   2 39.5 18-01-1966 21-04-2022      2005-07-16 25.587530    2            1</span></span>
<span><span class="co">#&gt; 6  6   1 81.2 06-11-1925 17-07-2023      2007-02-02 49.415904    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10 ck death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1       NA       0    1     1  1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2       NA       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3        0       1   NA    NA  0 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4        1       0    0     0  0 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5       NA       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6        1       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   age_group size_bin</span></span>
<span><span class="co">#&gt; 1     70-80     2-14</span></span>
<span><span class="co">#&gt; 2     30-40    14-24</span></span>
<span><span class="co">#&gt; 3     60-70    38-50</span></span>
<span><span class="co">#&gt; 4     40-50    24-38</span></span>
<span><span class="co">#&gt; 5     40-50    24-38</span></span>
<span><span class="co">#&gt; 6     80-90    38-50</span></span></code></pre></div>
<p>The new variables can also be given the same name pattern if the
input variables are similar such as dates</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">#Conversion into date format</span></span>
<span>  <span class="fu"><a href="../reference/datR.html">datR</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"date"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/cutR.html">cutR</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">recurrence_date</span>, <span class="va">metastasis_date</span><span class="op">)</span>,</span>
<span>       seqlist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"seq"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1900</span>,<span class="fl">2030</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>       name.pattern <span class="op">=</span> <span class="st">"_bin"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;   id sex  age      birth   followup date_of_surgery      size type localisation</span></span>
<span><span class="co">#&gt; 1  1   1 79.1 20-09-1929 03-04-2023      2008-11-03  7.302734    1            3</span></span>
<span><span class="co">#&gt; 2  2   2 38.1 12-10-1953 18-12-2025      1991-11-13 20.043036    1            1</span></span>
<span><span class="co">#&gt; 3  3   1 60.6 11-05-1948 21-09-2025      2008-12-17 42.412003    1            2</span></span>
<span><span class="co">#&gt; 4  4   1 45.2 22-04-1949 11-02-2022      1994-07-17 27.853775    1            3</span></span>
<span><span class="co">#&gt; 5  5   2 39.5 18-01-1966 21-04-2022      2005-07-16 25.587530    2            1</span></span>
<span><span class="co">#&gt; 6  6   1 81.2 06-11-1925 17-07-2023      2007-02-02 49.415904    2            3</span></span>
<span><span class="co">#&gt;   necrosis margins cd10 sox10 ck death_date recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 1       NA       0    1     1  1       &lt;NA&gt;      2015-03-22            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2       NA       0    0     0 NA       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3        0       1   NA    NA  0 2017-09-02            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4        1       0    0     0  0 2018-10-04      2011-12-31            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5       NA       0    0    NA  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6        1       1    1     1  0       &lt;NA&gt;            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   recurrence_date_bin metastasis_date_bin</span></span>
<span><span class="co">#&gt; 1           2010-2020                &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2                &lt;NA&gt;                &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3                &lt;NA&gt;                &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4           2010-2020                &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5                &lt;NA&gt;                &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6                &lt;NA&gt;                &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="conversion-to-factor">Conversion to factor<a class="anchor" aria-label="anchor" href="#conversion-to-factor"></a>
</h3>
<p>In many cases it is of interest to specify a categorical variable
with certain levels or reference groups. This is done with factR(). If
nothing else is specified, factR() converts a character string into a
factor, with the level with most observations as reference. The function
str() is used to show the formatting of the type variable has changed to
factor.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/factR.html">factR</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">str</span></span>
<span><span class="co">#&gt; 'data.frame':    500 obs. of  17 variables:</span></span>
<span><span class="co">#&gt;  $ id             : int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ sex            : num  1 2 1 1 2 1 1 1 2 2 ...</span></span>
<span><span class="co">#&gt;  $ age            : num  79.1 38.1 60.6 45.2 39.5 81.2 74.9 38.8 31.8 51.3 ...</span></span>
<span><span class="co">#&gt;  $ birth          : chr  "20-09-1929" "12-10-1953" "11-05-1948" "22-04-1949" ...</span></span>
<span><span class="co">#&gt;  $ followup       : chr  "03-04-2023" "18-12-2025" "21-09-2025" "11-02-2022" ...</span></span>
<span><span class="co">#&gt;  $ date_of_surgery: chr  "2008-11-03" "1991-11-13" "2008-12-17" "1994-07-17" ...</span></span>
<span><span class="co">#&gt;  $ size           : num  7.3 20 42.4 27.9 25.6 ...</span></span>
<span><span class="co">#&gt;  $ type           : Factor w/ 3 levels "1","2","0": 1 1 1 1 2 2 3 3 3 2 ...</span></span>
<span><span class="co">#&gt;  $ localisation   : int  3 1 2 3 1 3 2 5 3 1 ...</span></span>
<span><span class="co">#&gt;  $ necrosis       : num  NA NA 0 1 NA 1 0 1 NA NA ...</span></span>
<span><span class="co">#&gt;  $ margins        : chr  "0" "0" "1" "0" ...</span></span>
<span><span class="co">#&gt;  $ cd10           : num  1 0 NA 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ sox10          : num  1 0 NA 0 NA 1 1 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ ck             : num  1 NA 0 0 0 0 0 NA 0 1 ...</span></span>
<span><span class="co">#&gt;  $ death_date     : chr  NA NA "2017-09-02" "2018-10-04" ...</span></span>
<span><span class="co">#&gt;  $ recurrence_date: chr  "2015-03-22" NA NA "2011-12-31" ...</span></span>
<span><span class="co">#&gt;  $ metastasis_date: chr  NA NA NA NA ...</span></span></code></pre></div>
<p>The reference group is specified using the reference argument</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/factR.html">factR</a></span><span class="op">(</span><span class="va">type</span>,</span>
<span>        reference <span class="op">=</span> <span class="st">"0"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">str</span></span>
<span><span class="co">#&gt; 'data.frame':    500 obs. of  17 variables:</span></span>
<span><span class="co">#&gt;  $ id             : int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ sex            : num  1 2 1 1 2 1 1 1 2 2 ...</span></span>
<span><span class="co">#&gt;  $ age            : num  79.1 38.1 60.6 45.2 39.5 81.2 74.9 38.8 31.8 51.3 ...</span></span>
<span><span class="co">#&gt;  $ birth          : chr  "20-09-1929" "12-10-1953" "11-05-1948" "22-04-1949" ...</span></span>
<span><span class="co">#&gt;  $ followup       : chr  "03-04-2023" "18-12-2025" "21-09-2025" "11-02-2022" ...</span></span>
<span><span class="co">#&gt;  $ date_of_surgery: chr  "2008-11-03" "1991-11-13" "2008-12-17" "1994-07-17" ...</span></span>
<span><span class="co">#&gt;  $ size           : num  7.3 20 42.4 27.9 25.6 ...</span></span>
<span><span class="co">#&gt;  $ type           : Factor w/ 3 levels "0","1","2": 2 2 2 2 3 3 1 1 1 3 ...</span></span>
<span><span class="co">#&gt;  $ localisation   : int  3 1 2 3 1 3 2 5 3 1 ...</span></span>
<span><span class="co">#&gt;  $ necrosis       : num  NA NA 0 1 NA 1 0 1 NA NA ...</span></span>
<span><span class="co">#&gt;  $ margins        : chr  "0" "0" "1" "0" ...</span></span>
<span><span class="co">#&gt;  $ cd10           : num  1 0 NA 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ sox10          : num  1 0 NA 0 NA 1 1 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ ck             : num  1 NA 0 0 0 0 0 NA 0 1 ...</span></span>
<span><span class="co">#&gt;  $ death_date     : chr  NA NA "2017-09-02" "2018-10-04" ...</span></span>
<span><span class="co">#&gt;  $ recurrence_date: chr  "2015-03-22" NA NA "2011-12-31" ...</span></span>
<span><span class="co">#&gt;  $ metastasis_date: chr  NA NA NA NA ...</span></span></code></pre></div>
<p>Levels can be manually assigned</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/factR.html">factR</a></span><span class="op">(</span><span class="va">type</span>,</span>
<span>        levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2"</span>,<span class="st">"1"</span>,<span class="st">"0"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">str</span></span>
<span><span class="co">#&gt; 'data.frame':    500 obs. of  17 variables:</span></span>
<span><span class="co">#&gt;  $ id             : int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ sex            : num  1 2 1 1 2 1 1 1 2 2 ...</span></span>
<span><span class="co">#&gt;  $ age            : num  79.1 38.1 60.6 45.2 39.5 81.2 74.9 38.8 31.8 51.3 ...</span></span>
<span><span class="co">#&gt;  $ birth          : chr  "20-09-1929" "12-10-1953" "11-05-1948" "22-04-1949" ...</span></span>
<span><span class="co">#&gt;  $ followup       : chr  "03-04-2023" "18-12-2025" "21-09-2025" "11-02-2022" ...</span></span>
<span><span class="co">#&gt;  $ date_of_surgery: chr  "2008-11-03" "1991-11-13" "2008-12-17" "1994-07-17" ...</span></span>
<span><span class="co">#&gt;  $ size           : num  7.3 20 42.4 27.9 25.6 ...</span></span>
<span><span class="co">#&gt;  $ type           : Factor w/ 3 levels "2","1","0": 2 2 2 2 1 1 3 3 3 1 ...</span></span>
<span><span class="co">#&gt;  $ localisation   : int  3 1 2 3 1 3 2 5 3 1 ...</span></span>
<span><span class="co">#&gt;  $ necrosis       : num  NA NA 0 1 NA 1 0 1 NA NA ...</span></span>
<span><span class="co">#&gt;  $ margins        : chr  "0" "0" "1" "0" ...</span></span>
<span><span class="co">#&gt;  $ cd10           : num  1 0 NA 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ sox10          : num  1 0 NA 0 NA 1 1 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ ck             : num  1 NA 0 0 0 0 0 NA 0 1 ...</span></span>
<span><span class="co">#&gt;  $ death_date     : chr  NA NA "2017-09-02" "2018-10-04" ...</span></span>
<span><span class="co">#&gt;  $ recurrence_date: chr  "2015-03-22" NA NA "2011-12-31" ...</span></span>
<span><span class="co">#&gt;  $ metastasis_date: chr  NA NA NA NA ...</span></span></code></pre></div>
<p>New labels can also be assigned and automatically specify levels
simultaneously</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/factR.html">factR</a></span><span class="op">(</span><span class="va">type</span>,</span>
<span>        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"type"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"benign"</span> <span class="op">=</span> <span class="st">"0"</span>,</span>
<span>                                    <span class="st">"intermediate"</span> <span class="op">=</span> <span class="st">"1"</span>,</span>
<span>                                    <span class="st">"malignant"</span> <span class="op">=</span> <span class="st">"2"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        lab_to_lev <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">str</span></span>
<span><span class="co">#&gt; 'data.frame':    500 obs. of  17 variables:</span></span>
<span><span class="co">#&gt;  $ id             : int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ sex            : num  1 2 1 1 2 1 1 1 2 2 ...</span></span>
<span><span class="co">#&gt;  $ age            : num  79.1 38.1 60.6 45.2 39.5 81.2 74.9 38.8 31.8 51.3 ...</span></span>
<span><span class="co">#&gt;  $ birth          : chr  "20-09-1929" "12-10-1953" "11-05-1948" "22-04-1949" ...</span></span>
<span><span class="co">#&gt;  $ followup       : chr  "03-04-2023" "18-12-2025" "21-09-2025" "11-02-2022" ...</span></span>
<span><span class="co">#&gt;  $ date_of_surgery: chr  "2008-11-03" "1991-11-13" "2008-12-17" "1994-07-17" ...</span></span>
<span><span class="co">#&gt;  $ size           : num  7.3 20 42.4 27.9 25.6 ...</span></span>
<span><span class="co">#&gt;  $ type           : Factor w/ 3 levels "benign","intermediate",..: 2 2 2 2 3 3 1 1 1 3 ...</span></span>
<span><span class="co">#&gt;  $ localisation   : int  3 1 2 3 1 3 2 5 3 1 ...</span></span>
<span><span class="co">#&gt;  $ necrosis       : num  NA NA 0 1 NA 1 0 1 NA NA ...</span></span>
<span><span class="co">#&gt;  $ margins        : chr  "0" "0" "1" "0" ...</span></span>
<span><span class="co">#&gt;  $ cd10           : num  1 0 NA 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ sox10          : num  1 0 NA 0 NA 1 1 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ ck             : num  1 NA 0 0 0 0 0 NA 0 1 ...</span></span>
<span><span class="co">#&gt;  $ death_date     : chr  NA NA "2017-09-02" "2018-10-04" ...</span></span>
<span><span class="co">#&gt;  $ recurrence_date: chr  "2015-03-22" NA NA "2011-12-31" ...</span></span>
<span><span class="co">#&gt;  $ metastasis_date: chr  NA NA NA NA ...</span></span></code></pre></div>
<p>Lastly, all the arguments can be specified for multiple variables at
once</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/factR.html">factR</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">type</span>, <span class="va">sex</span><span class="op">)</span>,</span>
<span>        reference <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"sex"</span> <span class="op">=</span> <span class="st">"2"</span><span class="op">)</span>,</span>
<span>        levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"type"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span>, <span class="st">"1"</span>, <span class="st">"2"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"sex"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f"</span> <span class="op">=</span> <span class="st">"1"</span>,</span>
<span>                                <span class="st">"m"</span> <span class="op">=</span> <span class="st">"2"</span><span class="op">)</span>,</span>
<span>                      <span class="st">"type"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"benign"</span> <span class="op">=</span> <span class="st">"0"</span>,</span>
<span>                      <span class="st">"intermediate"</span> <span class="op">=</span> <span class="st">"1"</span>,</span>
<span>                      <span class="st">"malignant"</span> <span class="op">=</span> <span class="st">"2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">str</span></span>
<span><span class="co">#&gt; 'data.frame':    500 obs. of  17 variables:</span></span>
<span><span class="co">#&gt;  $ id             : int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ sex            : Factor w/ 2 levels "m","f": 2 1 2 2 1 2 2 2 1 1 ...</span></span>
<span><span class="co">#&gt;  $ age            : num  79.1 38.1 60.6 45.2 39.5 81.2 74.9 38.8 31.8 51.3 ...</span></span>
<span><span class="co">#&gt;  $ birth          : chr  "20-09-1929" "12-10-1953" "11-05-1948" "22-04-1949" ...</span></span>
<span><span class="co">#&gt;  $ followup       : chr  "03-04-2023" "18-12-2025" "21-09-2025" "11-02-2022" ...</span></span>
<span><span class="co">#&gt;  $ date_of_surgery: chr  "2008-11-03" "1991-11-13" "2008-12-17" "1994-07-17" ...</span></span>
<span><span class="co">#&gt;  $ size           : num  7.3 20 42.4 27.9 25.6 ...</span></span>
<span><span class="co">#&gt;  $ type           : Factor w/ 3 levels "benign","intermediate",..: 2 2 2 2 3 3 1 1 1 3 ...</span></span>
<span><span class="co">#&gt;  $ localisation   : int  3 1 2 3 1 3 2 5 3 1 ...</span></span>
<span><span class="co">#&gt;  $ necrosis       : num  NA NA 0 1 NA 1 0 1 NA NA ...</span></span>
<span><span class="co">#&gt;  $ margins        : chr  "0" "0" "1" "0" ...</span></span>
<span><span class="co">#&gt;  $ cd10           : num  1 0 NA 0 0 1 0 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ sox10          : num  1 0 NA 0 NA 1 1 0 1 1 ...</span></span>
<span><span class="co">#&gt;  $ ck             : num  1 NA 0 0 0 0 0 NA 0 1 ...</span></span>
<span><span class="co">#&gt;  $ death_date     : chr  NA NA "2017-09-02" "2018-10-04" ...</span></span>
<span><span class="co">#&gt;  $ recurrence_date: chr  "2015-03-22" NA NA "2011-12-31" ...</span></span>
<span><span class="co">#&gt;  $ metastasis_date: chr  NA NA NA NA ...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="subset-rows-filters">Subset rows (filters)<a class="anchor" aria-label="anchor" href="#subset-rows-filters"></a>
</h3>
<p>If we want to keep only certain rows we use filter(). Here we limit
the dataset to patients without necrosis (necrosis = 0)</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">necrosis</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     3     1  60.6 11-05-1948 21-09-2025      2008-12-17 42.412003     1</span></span>
<span><span class="co">#&gt; 2:     7     1  74.9 16-06-1921 15-11-2023      1996-05-23 41.732124     0</span></span>
<span><span class="co">#&gt; 3:    13     1  12.2 01-03-1980 01-06-2022      1992-05-20 29.106387     2</span></span>
<span><span class="co">#&gt; 4:    16     2  33.5 30-06-1957 22-03-2025      1991-01-11 17.586347     0</span></span>
<span><span class="co">#&gt; 5:    18     2  22.8 13-08-1974 31-10-2022      1997-05-31 13.495825     1</span></span>
<span><span class="co">#&gt; 6:    22     1  14.2 14-05-1980 06-09-2024      1994-07-21  2.055776     1</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            2        0       1    NA    NA     0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            2        0       1     0     1     0       &lt;NA&gt;      2012-08-30</span></span>
<span><span class="co">#&gt; 3:            3        0       1     0     1     0 2020-03-28      2014-09-16</span></span>
<span><span class="co">#&gt; 4:            4        0       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            3        0       1     1     0     1       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            4        0       1    NA    NA    NA       &lt;NA&gt;      2012-05-04</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:      2012-04-11</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:      2014-03-30</span></span></code></pre></div>
<p>In case of multiple conditions we use the <code>%in%</code> operator,
as this specified that the variables has one of the following values</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">localisation</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     1     1  79.1 20-09-1929 03-04-2023      2008-11-03  7.302734     1</span></span>
<span><span class="co">#&gt; 2:     2     2  38.1 12-10-1953 18-12-2025      1991-11-13 20.043036     1</span></span>
<span><span class="co">#&gt; 3:     3     1  60.6 11-05-1948 21-09-2025      2008-12-17 42.412003     1</span></span>
<span><span class="co">#&gt; 4:     4     1  45.2 22-04-1949 11-02-2022      1994-07-17 27.853775     1</span></span>
<span><span class="co">#&gt; 5:     5     2  39.5 18-01-1966 21-04-2022      2005-07-16 25.587530     2</span></span>
<span><span class="co">#&gt; 6:     6     1  81.2 06-11-1925 17-07-2023      2007-02-02 49.415904     2</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            3       NA       0     1     1     1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2:            1       NA       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            2        0       1    NA    NA     0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            3        1       0     0     0     0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 5:            1       NA       0     0    NA     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            3        1       1     1     1     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            &lt;NA&gt;</span></span></code></pre></div>
<p>For numerical variables we use &lt;, &gt;, ==, &gt;= and &lt;=</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">size</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery     size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;    &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     2     2  38.1 12-10-1953 18-12-2025      1991-11-13 20.04304     1</span></span>
<span><span class="co">#&gt; 2:     3     1  60.6 11-05-1948 21-09-2025      2008-12-17 42.41200     1</span></span>
<span><span class="co">#&gt; 3:     4     1  45.2 22-04-1949 11-02-2022      1994-07-17 27.85378     1</span></span>
<span><span class="co">#&gt; 4:     5     2  39.5 18-01-1966 21-04-2022      2005-07-16 25.58753     2</span></span>
<span><span class="co">#&gt; 5:     6     1  81.2 06-11-1925 17-07-2023      2007-02-02 49.41590     2</span></span>
<span><span class="co">#&gt; 6:     7     1  74.9 16-06-1921 15-11-2023      1996-05-23 41.73212     0</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            1       NA       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            2        0       1    NA    NA     0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            3        1       0     0     0     0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 4:            1       NA       0     0    NA     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            3        1       1     1     1     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            2        0       1     0     1     0       &lt;NA&gt;      2012-08-30</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            &lt;NA&gt;</span></span></code></pre></div>
<p>We can also use between() to specify an interval</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/between.html" class="external-link">between</a></span><span class="op">(</span><span class="va">size</span>, <span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery     size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;    &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     9     2  31.8 11-11-1958 11-03-2025      1990-08-29 10.72685     0</span></span>
<span><span class="co">#&gt; 2:    14     1  61.5 28-09-1944 08-06-2021      2006-03-15 14.73268     0</span></span>
<span><span class="co">#&gt; 3:    16     2  33.5 30-06-1957 22-03-2025      1991-01-11 17.58635     0</span></span>
<span><span class="co">#&gt; 4:    18     2  22.8 13-08-1974 31-10-2022      1997-05-31 13.49582     1</span></span>
<span><span class="co">#&gt; 5:    23     1  35.3 26-10-1969 31-07-2022      2005-03-02 14.91346     2</span></span>
<span><span class="co">#&gt; 6:    27     2  52.2 27-02-1951 07-05-2022      2003-04-25 17.22927     1</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            3       NA       1     1     1     0       &lt;NA&gt;      2014-02-16</span></span>
<span><span class="co">#&gt; 2:            0        1       0     0     0    NA       &lt;NA&gt;      2011-05-23</span></span>
<span><span class="co">#&gt; 3:            4        0       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            3        0       1     1     0     1       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            2       NA       0    NA     0    NA       &lt;NA&gt;      2010-06-12</span></span>
<span><span class="co">#&gt; 6:            3       NA       0     1    NA     1 2017-06-25            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:      2012-04-11</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:      2014-10-10</span></span>
<span><span class="co">#&gt; 6:      2013-05-21</span></span></code></pre></div>
<p>Multiple conditions can be combined using so-called “boolean”
operators whic are and/or/not etc. Here we keep rows where necrosis = 1
AND localisation is 1, 2 or 3 OR size is larger than 10. Here necrosis
needs to be 1, but either of the conditions for localisation or size can
be satisified.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">necrosis</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">localisation</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span> <span class="op">|</span> <span class="va">size</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     4     1  45.2 22-04-1949 11-02-2022      1994-07-17 27.853775     1</span></span>
<span><span class="co">#&gt; 2:     6     1  81.2 06-11-1925 17-07-2023      2007-02-02 49.415904     2</span></span>
<span><span class="co">#&gt; 3:    14     1  61.5 28-09-1944 08-06-2021      2006-03-15 14.732677     0</span></span>
<span><span class="co">#&gt; 4:    15     1  14.1 25-01-1979 11-10-2025      1993-03-09 41.706223     0</span></span>
<span><span class="co">#&gt; 5:    20     1  58.2 05-02-1939 01-10-2024      1997-04-26  3.757738     1</span></span>
<span><span class="co">#&gt; 6:    21     1  83.0 09-04-1925 07-02-2025      2008-04-16 43.065297     1</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            3        1       0     0     0     0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 2:            3        1       1     1     1     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            0        1       0     0     0    NA       &lt;NA&gt;      2011-05-23</span></span>
<span><span class="co">#&gt; 4:            2        1       0     0    NA    NA 2020-09-30      2014-01-06</span></span>
<span><span class="co">#&gt; 5:            3        1       1    NA     1    NA       &lt;NA&gt;      2010-08-13</span></span>
<span><span class="co">#&gt; 6:            4        1       1     0     0     1       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:      2012-04-13</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="arrangingsorting-data">Arranging/sorting data<a class="anchor" aria-label="anchor" href="#arrangingsorting-data"></a>
</h3>
<p>Sorting is done with the arrange(). If the variable needs to be in
descending order it is prefixed by a desc()</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">size</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery     size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;    &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:    22     1  14.2 14-05-1980 06-09-2024      1994-07-21 2.055776     1</span></span>
<span><span class="co">#&gt; 2:   405     1  41.9 25-05-1953 13-05-2023      1995-04-17 2.060206     0</span></span>
<span><span class="co">#&gt; 3:   305     1  66.3 25-04-1942 14-09-2025      2008-08-08 2.177728     1</span></span>
<span><span class="co">#&gt; 4:   178     2  48.3 05-10-1960 20-06-2025      2009-01-15 2.179957     2</span></span>
<span><span class="co">#&gt; 5:    11     1  61.8 17-03-1946 09-06-2023      2008-01-13 2.391121     1</span></span>
<span><span class="co">#&gt; 6:   114     2  84.2 25-04-1920 22-01-2023      2004-07-24 2.583805     1</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            4        0       1    NA    NA    NA       &lt;NA&gt;      2012-05-04</span></span>
<span><span class="co">#&gt; 2:            2       NA       1     0     0     1       &lt;NA&gt;      2014-06-25</span></span>
<span><span class="co">#&gt; 3:            3        0       0     0    NA    NA 2016-05-20            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            2        0       0     1     1    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            3       NA       0    NA     0     0       &lt;NA&gt;      2011-04-04</span></span>
<span><span class="co">#&gt; 6:            2        1       0     1     0     1       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:      2014-03-30</span></span>
<span><span class="co">#&gt; 2:      2011-06-13</span></span>
<span><span class="co">#&gt; 3:      2015-10-05</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:      2014-07-21</span></span></code></pre></div>
<p>Descending size</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">size</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery     size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;    &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:   286     2  68.2 28-09-1939 08-03-2023      2007-12-03 49.94005     1</span></span>
<span><span class="co">#&gt; 2:   427     1  50.7 21-06-1949 01-08-2025      2000-03-02 49.82537     1</span></span>
<span><span class="co">#&gt; 3:    17     2  58.9 10-01-1943 24-12-2024      2001-12-08 49.73744     1</span></span>
<span><span class="co">#&gt; 4:   469     2  41.1 24-04-1963 22-01-2025      2004-05-26 49.70139     1</span></span>
<span><span class="co">#&gt; 5:    95     1  49.6 21-04-1960 26-10-2023      2009-11-21 49.61720     1</span></span>
<span><span class="co">#&gt; 6:   387     2  71.8 01-05-1921 03-11-2023      1993-02-19 49.60115     2</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            3        1       0     0     1    NA 2016-01-12      2015-01-23</span></span>
<span><span class="co">#&gt; 2:            3       NA       0     0    NA     1       &lt;NA&gt;      2015-03-28</span></span>
<span><span class="co">#&gt; 3:            2       NA       1    NA     0    NA 2018-08-28            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            0        0       1     1    NA    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            3        1       0    NA     1    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            4        1       0     1    NA     1 2016-05-13      2014-07-26</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:      2012-01-30</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="missing-data">Missing data<a class="anchor" aria-label="anchor" href="#missing-data"></a>
</h3>
<p>To get a quick overview of missing data in the dataset we use
missR()</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/missR.html">missR</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; No NAs detected</span></span></code></pre></div>
<p>Missing values can be dropped with drop_na()</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">metastasis_date</span>, <span class="va">necrosis</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     8     1  38.8 12-11-1960 07-10-2021      1999-08-31  9.040216     0</span></span>
<span><span class="co">#&gt; 2:    16     2  33.5 30-06-1957 22-03-2025      1991-01-11 17.586347     0</span></span>
<span><span class="co">#&gt; 3:    21     1  83.0 09-04-1925 07-02-2025      2008-04-16 43.065297     1</span></span>
<span><span class="co">#&gt; 4:    22     1  14.2 14-05-1980 06-09-2024      1994-07-21  2.055776     1</span></span>
<span><span class="co">#&gt; 5:    32     2  68.0 11-09-1940 04-12-2022      2008-09-21 13.096115     1</span></span>
<span><span class="co">#&gt; 6:    34     2  48.1 03-10-1961 20-01-2025      2009-11-22 24.000126     2</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            5        1       0     0     0    NA 2018-05-09      2012-01-31</span></span>
<span><span class="co">#&gt; 2:            4        0       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            4        1       1     0     0     1       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            4        0       1    NA    NA    NA       &lt;NA&gt;      2012-05-04</span></span>
<span><span class="co">#&gt; 5:            2        1       0     0     1     1       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            3        0       0     1     0     0 2017-06-14      2010-08-21</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:      2011-10-13</span></span>
<span><span class="co">#&gt; 2:      2012-04-11</span></span>
<span><span class="co">#&gt; 3:      2012-04-13</span></span>
<span><span class="co">#&gt; 4:      2014-03-30</span></span>
<span><span class="co">#&gt; 5:      2011-04-24</span></span>
<span><span class="co">#&gt; 6:      2013-09-08</span></span></code></pre></div>
<p>Sometimes we want to remove rows where at least one of the values are
NA. This is done with rowR() which is useful for rowwise operations</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rowR.html">rowR</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cd10</span>, <span class="va">sox10</span>, <span class="va">ck</span><span class="op">)</span>,</span>
<span>       type <span class="op">=</span> <span class="st">"any.na"</span>,</span>
<span>       filter <span class="op">=</span> <span class="st">"remove"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     1     1  79.1 20-09-1929 03-04-2023      2008-11-03  7.302734     1</span></span>
<span><span class="co">#&gt; 2:     4     1  45.2 22-04-1949 11-02-2022      1994-07-17 27.853775     1</span></span>
<span><span class="co">#&gt; 3:     6     1  81.2 06-11-1925 17-07-2023      2007-02-02 49.415904     2</span></span>
<span><span class="co">#&gt; 4:     7     1  74.9 16-06-1921 15-11-2023      1996-05-23 41.732124     0</span></span>
<span><span class="co">#&gt; 5:     9     2  31.8 11-11-1958 11-03-2025      1990-08-29 10.726850     0</span></span>
<span><span class="co">#&gt; 6:    10     2  51.3 18-08-1953 28-11-2021      2004-12-08 21.547746     2</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            3       NA       0     1     1     1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2:            3        1       0     0     0     0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 3:            3        1       1     1     1     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            2        0       1     0     1     0       &lt;NA&gt;      2012-08-30</span></span>
<span><span class="co">#&gt; 5:            3       NA       1     1     1     0       &lt;NA&gt;      2014-02-16</span></span>
<span><span class="co">#&gt; 6:            1       NA       1     1     1     1       &lt;NA&gt;      2014-08-15</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            &lt;NA&gt;</span></span></code></pre></div>
<p>We can also flag the rows into a new variable</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/rowR.html">rowR</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cd10</span>, <span class="va">sox10</span>, <span class="va">ck</span><span class="op">)</span>,</span>
<span>       type <span class="op">=</span> <span class="st">"any.na"</span>,</span>
<span>       new <span class="op">=</span> <span class="st">"flag"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     1     1  79.1 20-09-1929 03-04-2023      2008-11-03  7.302734     1</span></span>
<span><span class="co">#&gt; 2:     2     2  38.1 12-10-1953 18-12-2025      1991-11-13 20.043036     1</span></span>
<span><span class="co">#&gt; 3:     3     1  60.6 11-05-1948 21-09-2025      2008-12-17 42.412003     1</span></span>
<span><span class="co">#&gt; 4:     4     1  45.2 22-04-1949 11-02-2022      1994-07-17 27.853775     1</span></span>
<span><span class="co">#&gt; 5:     5     2  39.5 18-01-1966 21-04-2022      2005-07-16 25.587530     2</span></span>
<span><span class="co">#&gt; 6:     6     1  81.2 06-11-1925 17-07-2023      2007-02-02 49.415904     2</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            3       NA       0     1     1     1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2:            1       NA       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            2        0       1    NA    NA     0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            3        1       0     0     0     0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 5:            1       NA       0     0    NA     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            3        1       1     1     1     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    metastasis_date  flag</span></span>
<span><span class="co">#&gt;             &lt;char&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;     0</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;     1</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;     1</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;     0</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;     1</span></span>
<span><span class="co">#&gt; 6:            &lt;NA&gt;     0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="join-multiple-data-frames">Join multiple data frames<a class="anchor" aria-label="anchor" href="#join-multiple-data-frames"></a>
</h3>
<p>The terminology is that we have a dataset X and a dataset Y.There are
different types of joins, as joins can be side-by-side (such as merging
to datasets based on a key variable) and end-to-end where one dataside
is a continuation of another. In the side-by-side joins we need to
specify a “by/key” variable which specifies how we link the two
datasets. In the end-to-end join there is never a “key” as these are
extensions and should roughly have the same variables.</p>
<div class="section level4">
<h4 id="left-join">Left join<a class="anchor" aria-label="anchor" href="#left-join"></a>
</h4>
<p>In a left_join, dataset X is complete and only observations from
dataset Y that are present in X are joined. For all</p>
<p>If we want to join two data frames, we use left_join().</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">redcap_df</span>, <span class="va">analysis_df</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">tail</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery     size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;    &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:   498     1  66.4 02-11-1931 11-08-2023      1998-03-16 34.90951     1</span></span>
<span><span class="co">#&gt; 2:   498     1  66.4 02-11-1931 11-08-2023      1998-03-16 34.90951     1</span></span>
<span><span class="co">#&gt; 3:   499     2  63.4 24-04-1944 05-09-2021      2007-09-12 34.17819     1</span></span>
<span><span class="co">#&gt; 4:   499     2  63.4 24-04-1944 05-09-2021      2007-09-12 34.17819     1</span></span>
<span><span class="co">#&gt; 5:   499     2  63.4 24-04-1944 05-09-2021      2007-09-12 34.17819     1</span></span>
<span><span class="co">#&gt; 6:   500     2  66.3 06-03-1942 21-11-2022      2008-06-07 17.15191     1</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            2        0       0     1    NA     0       &lt;NA&gt;      2010-08-06</span></span>
<span><span class="co">#&gt; 2:            2        0       0     1    NA     0       &lt;NA&gt;      2010-08-06</span></span>
<span><span class="co">#&gt; 3:            4        0       1     1     0     1 2018-12-24            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            4        0       1     1     0     1 2018-12-24            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            4        0       1     1     0     1 2018-12-24            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            2        0       0     0     0     1 2017-05-12      2013-04-08</span></span>
<span><span class="co">#&gt;    metastasis_date       X6       X7         X8          X9         X10     X1</span></span>
<span><span class="co">#&gt;             &lt;char&gt;    &lt;num&gt;    &lt;num&gt;      &lt;num&gt;       &lt;num&gt;       &lt;num&gt; &lt;fctr&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt; 61.70529 67.99959 -0.2146209  0.45695559 -0.63244990     T0</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt; 70.45285 63.29462 -0.9465149 -0.03072066 -0.55711509     T0</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt; 59.17862 66.46530  1.9006568  0.58998279 -0.79226076     T0</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt; 55.40593 54.43776 -0.6452489  1.21994339  0.08777097     T0</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt; 49.97634 59.53915 -0.3484089  1.32272643 -0.45083066     T0</span></span>
<span><span class="co">#&gt; 6:            &lt;NA&gt; 84.66726 70.04153 -1.1777740 -0.79106526  3.03003518     T1</span></span>
<span><span class="co">#&gt;        X2     X3     X4     X5   ttt  event     time2 event2 event3      X6_bin</span></span>
<span><span class="co">#&gt;    &lt;fctr&gt; &lt;fctr&gt; &lt;fctr&gt; &lt;fctr&gt; &lt;num&gt; &lt;fctr&gt;     &lt;num&gt;  &lt;int&gt;  &lt;int&gt;      &lt;fctr&gt;</span></span>
<span><span class="co">#&gt; 1:      1     T1      0      1 142.8      0 142.03070      0      1 59.21-69.28</span></span>
<span><span class="co">#&gt; 2:      1     T0      1      0 106.8      1 107.14123      1      3 69.28-111.5</span></span>
<span><span class="co">#&gt; 3:      1     T1      0      0  56.4      0  58.98477      0      2 49.26-59.21</span></span>
<span><span class="co">#&gt; 4:      1     T1      1      1  98.4      1  99.02183      1      3 49.26-59.21</span></span>
<span><span class="co">#&gt; 5:      2     T1      0      1  66.0      0  65.14302      1      2 49.26-59.21</span></span>
<span><span class="co">#&gt; 6:      1     T0      0      1  52.8      1  52.60404      1      2 69.28-111.5</span></span>
<span><span class="co">#&gt;         X7_bin          X8_bin         X9_bin         X10_bin</span></span>
<span><span class="co">#&gt;         &lt;fctr&gt;          &lt;fctr&gt;         &lt;fctr&gt;          &lt;fctr&gt;</span></span>
<span><span class="co">#&gt; 1: 63.27-78.64 -0.6914--0.0393 -0.0061-0.6478 -0.7032--0.0023</span></span>
<span><span class="co">#&gt; 2: 63.27-78.64  -4.303--0.6914 -0.648--0.0061 -0.7032--0.0023</span></span>
<span><span class="co">#&gt; 3: 63.27-78.64    0.6773-3.248 -0.0061-0.6478  -3.147--0.7032</span></span>
<span><span class="co">#&gt; 4: 42.59-56.53 -0.6914--0.0393   0.6478-3.377  -0.0023-0.6628</span></span>
<span><span class="co">#&gt; 5: 56.53-59.87 -0.6914--0.0393   0.6478-3.377 -0.7032--0.0023</span></span>
<span><span class="co">#&gt; 6: 63.27-78.64  -4.303--0.6914   -3.45--0.648    0.6628-3.624</span></span></code></pre></div>
<p>We see that some of the patients do not have any rows, as the
redcap_df only has ids up to 350.</p>
<p>We can left_join in a pipe. Here the current dataset we are working
with is symbolised by a dot. We can also use other functions with the
pipe operator inside the left_join.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analysis_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/plyr/man/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>,</span>
<span>            <span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"date"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">tail</span></span>
<span><span class="co">#&gt;            X6       X7          X8         X9        X10 X1 X2 X3 X4 X5   ttt</span></span>
<span><span class="co">#&gt; 1995 74.98396 67.07087 -0.04531170 -0.5390216  0.3911101 T1  1 T0  1  0  26.4</span></span>
<span><span class="co">#&gt; 1996 38.76922 58.88108  0.21556532  1.2376595 -1.1185086 T0  1 T1  1  1 109.2</span></span>
<span><span class="co">#&gt; 1997 46.08183 54.86935 -0.02686586  0.6506245 -0.6798144 T2  1 T2  0  1 121.2</span></span>
<span><span class="co">#&gt; 1998 73.64600 58.98176 -1.22363094 -0.8991348  2.5642655 T2  1 T1  1  1  18.0</span></span>
<span><span class="co">#&gt; 1999 51.40115 56.47378  0.25786670  0.2150162  1.2424939 T0  1 T1  1  0  96.0</span></span>
<span><span class="co">#&gt; 2000 53.86347 59.64135 -4.30278144 -1.3047959  1.0786687 T0  1 T1  0  1  99.6</span></span>
<span><span class="co">#&gt;      event     time2 event2 event3  id      X6_bin      X7_bin          X8_bin</span></span>
<span><span class="co">#&gt; 1995     1  26.59780      0      3 698 69.28-111.5 63.27-78.64 -0.6914--0.0393</span></span>
<span><span class="co">#&gt; 1996     0 108.14881      0      3 698 13.04-49.26 56.53-59.87  -0.0393-0.6773</span></span>
<span><span class="co">#&gt; 1997     0 119.91584      0      2 698 13.04-49.26 42.59-56.53  -0.0393-0.6773</span></span>
<span><span class="co">#&gt; 1998     1  16.93386      0      1 699 69.28-111.5 56.53-59.87  -4.303--0.6914</span></span>
<span><span class="co">#&gt; 1999     0  95.84683      0      1 699 49.26-59.21 42.59-56.53  -0.0393-0.6773</span></span>
<span><span class="co">#&gt; 2000     0 101.65500      0      2 700 49.26-59.21 56.53-59.87  -4.303--0.6914</span></span>
<span><span class="co">#&gt;              X9_bin         X10_bin date_of_surgery death_date recurrence_date</span></span>
<span><span class="co">#&gt; 1995 -0.648--0.0061  -0.0023-0.6628            &lt;NA&gt;       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 1996   0.6478-3.377  -3.147--0.7032            &lt;NA&gt;       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 1997   0.6478-3.377 -0.7032--0.0023            &lt;NA&gt;       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 1998   -3.45--0.648    0.6628-3.624            &lt;NA&gt;       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 1999 -0.0061-0.6478    0.6628-3.624            &lt;NA&gt;       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2000   -3.45--0.648    0.6628-3.624            &lt;NA&gt;       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      metastasis_date</span></span>
<span><span class="co">#&gt; 1995            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 1996            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 1997            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 1998            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 1999            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2000            &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="full-join">Full join<a class="anchor" aria-label="anchor" href="#full-join"></a>
</h4>
<p>In a full join, all rows are combined</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analysis_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span><span class="va">.</span>,</span>
<span>            <span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"date"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">tail</span></span>
<span><span class="co">#&gt;      X6 X7 X8 X9 X10   X1   X2   X3   X4   X5 ttt event time2 event2 event3  id</span></span>
<span><span class="co">#&gt; 2021 NA NA NA NA  NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  NA  &lt;NA&gt;    NA     NA     NA 439</span></span>
<span><span class="co">#&gt; 2022 NA NA NA NA  NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  NA  &lt;NA&gt;    NA     NA     NA 448</span></span>
<span><span class="co">#&gt; 2023 NA NA NA NA  NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  NA  &lt;NA&gt;    NA     NA     NA 468</span></span>
<span><span class="co">#&gt; 2024 NA NA NA NA  NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  NA  &lt;NA&gt;    NA     NA     NA 472</span></span>
<span><span class="co">#&gt; 2025 NA NA NA NA  NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  NA  &lt;NA&gt;    NA     NA     NA 474</span></span>
<span><span class="co">#&gt; 2026 NA NA NA NA  NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  NA  &lt;NA&gt;    NA     NA     NA 491</span></span>
<span><span class="co">#&gt;      X6_bin X7_bin X8_bin X9_bin X10_bin date_of_surgery death_date</span></span>
<span><span class="co">#&gt; 2021   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;      1990-04-27       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2022   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;      2006-10-08       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2023   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;      1990-12-01       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2024   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;      2002-12-01 2019-12-29</span></span>
<span><span class="co">#&gt; 2025   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;      2008-09-12       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2026   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt;      1990-04-26       &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      recurrence_date metastasis_date</span></span>
<span><span class="co">#&gt; 2021            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2022            &lt;NA&gt;      2013-11-04</span></span>
<span><span class="co">#&gt; 2023      2010-08-31      2014-11-16</span></span>
<span><span class="co">#&gt; 2024            &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2025      2015-06-05            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2026      2010-02-10      2014-02-10</span></span></code></pre></div>
<p>Here we se missing data for dataset X and complete data for dataset Y
as all rows are kept.</p>
</div>
<div class="section level4">
<h4 id="appending-rows-bind-rows">Appending rows (bind rows)<a class="anchor" aria-label="anchor" href="#appending-rows-bind-rows"></a>
</h4>
<p>To obtain a relevant case we split our dataset into two</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r1</span> <span class="op">&lt;-</span> <span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">&lt;</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">r2</span> <span class="op">&lt;-</span> <span class="va">redcap_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">&gt;=</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Binding it back together</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">r1</span>, <span class="va">r2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">head</span></span>
<span><span class="co">#&gt;       id   sex   age      birth   followup date_of_surgery      size  type</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;     &lt;char&gt;          &lt;char&gt;     &lt;num&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     1     1  79.1 20-09-1929 03-04-2023      2008-11-03  7.302734     1</span></span>
<span><span class="co">#&gt; 2:     2     2  38.1 12-10-1953 18-12-2025      1991-11-13 20.043036     1</span></span>
<span><span class="co">#&gt; 3:     3     1  60.6 11-05-1948 21-09-2025      2008-12-17 42.412003     1</span></span>
<span><span class="co">#&gt; 4:     4     1  45.2 22-04-1949 11-02-2022      1994-07-17 27.853775     1</span></span>
<span><span class="co">#&gt; 5:     5     2  39.5 18-01-1966 21-04-2022      2005-07-16 25.587530     2</span></span>
<span><span class="co">#&gt; 6:     6     1  81.2 06-11-1925 17-07-2023      2007-02-02 49.415904     2</span></span>
<span><span class="co">#&gt;    localisation necrosis margins  cd10 sox10    ck death_date recurrence_date</span></span>
<span><span class="co">#&gt;           &lt;int&gt;    &lt;num&gt;  &lt;char&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;     &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            3       NA       0     1     1     1       &lt;NA&gt;      2015-03-22</span></span>
<span><span class="co">#&gt; 2:            1       NA       0     0     0    NA       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            2        0       1    NA    NA     0 2017-09-02            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            3        1       0     0     0     0 2018-10-04      2011-12-31</span></span>
<span><span class="co">#&gt; 5:            1       NA       0     0    NA     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            3        1       1     1     1     0       &lt;NA&gt;            &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    metastasis_date</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5:            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6:            &lt;NA&gt;</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mathias Ørholt.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
